<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 3.2 Final//EN">
<HTML>
<HEAD>
<META HTTP-EQUIV="Content-Type" CONTENT="text/html; charset=utf-8">
<TITLE>
  Release 2.10.0
</TITLE>
</HEAD>
<BODY>
<H1>Release 2.10.0</H1>

This is a 10 year anniversary bug fix and enhancement release, which requires a minimum of Java 8. 
Note that a minimum of Java 11 is recommended, especially for high DPI displays.
<br><br>
These release notes do not include all of the changes included in add-ons updated since 2.9.0.
<br><br>
Some of the more significant enhancements include:

<H3>Custom Pages</H3>
<a href="../start/features/custompages.html">Custom Pages</a> can be defined on a per context basis - 
these allow ZAP to identify various non-standard error handling conditions such as custom error pages and handle them more effectively.

<H3>Authentication Polling</H3>
The concept of <a href="../start/features/authstrategies.html">Authentication Verification Strategies</a> has been introduced which allows ZAP to handle
a wider range of authentication mechanisms including the option to poll a specified page for the authentication status of a user.

<H3>Site Tree Control</H3>
Scripts and add-ons now have full access to how nodes are represented in the <a href="../start/features/sitestree.html">Sites Tree</a>.
Both <a href="https://github.com/zaproxy/community-scripts/tree/master/variant">Input Vector Scripts</a> and add-ons which include implementations of the 
<a href="https://static.javadoc.io/org.zaproxy/zap/2.10.0/org/parosproxy/paros/core/scanner/Variant.html">Variant</a> class can change both the tree
structure and names used for new nodes.
<br><br>
For more details see the <a href="https://www.zaproxy.org/blog/2020-09-22-sites-tree-modifiers/">Site Tree Modifiers</a> Blog post.

<H3>Dynamic Look and Feel including Dark Mode</H3>
The Desktop UI includes a new set of open source Look and Feel's c/o <a href="https://github.com/JFormDesigner/FlatLaf">FlatLaf</a> including 2 Dark Mode options.<br>
You can also dynamically switch the Look and Feel via a button on the <a href="../ui/tltoolbar.html">Top Level Toolbar</a>.
<br><br>
For more details of the dark mode see the <a href="https://www.zaproxy.org/blog/2020-03-04-dark-mode-in-the-weekly-release/">Dark Mode in the Weekly Release</a> Blog post.

<H3>Authentication Headers via Env Vars</H3>
A new set of environmental variables are available which allow you to easily add an authentication header to all of the requests that are proxied through ZAP or initiated
by the ZAP tools, including the spiders and active scanner.
These are documented on the <a href="../start/features/authentication.html#envvars">Authentication</a> page.

<H3>SOCKS Proxy Configuration</H3>
It is now possible to dynamically configure the outgoing SOCKS proxy in the <a href="../ui/dialogs/options/connection.html">Options' Connection screen</a>.
By default the SOCKS proxy configuration applies to all connections made by ZAP.

<H3>Cached Scripts</H3>
The following script types are now cached between invocations reducing the time it takes to reuse them:
<ul>
<li>Active Rules</li>
<li>HTTP Sender</li>
<li>Input Vectors, when used for the Sites tree</li>
<li>Passive Rules</li>
<li>Proxy</li>
</ul>

<H2>New Add-Ons</H2>
The following add-ons are included by default in this release for the first time:
<ul>
  <li><a href="https://www.zaproxy.org/docs/desktop/addons/encode-decode-hash/">Advanced Encode / Decode / Hash dialog</a> - this replaces the old core encode/decode/hash dialog</li>
  <li><a href="https://www.zaproxy.org/docs/desktop/addons/dom-xss-active-scan-rule/">DOM XSS Scan Rule</a> - an Active Scan rule for detecting DOM XSS vulnerabilities</li>
  <li><a href="https://www.zaproxy.org/docs/desktop/addons/form-handler/">Form Handler</a> - allows for the custom configuration of values used in forms based on field names</li>
  <li><a href="https://www.zaproxy.org/docs/desktop/addons/graalvm-javascript/">GraalVM JavaScript</a> - included as Java 15+ no longer includes the Oracle Nashorn JavaScript engine</li>
  <li><a href="https://www.zaproxy.org/docs/desktop/addons/graphql-support/">GraphQL Supprt</a> - allows you to import and active scan GraphQL definitions</li>
  <li><a href="https://www.zaproxy.org/docs/desktop/addons/retire.js/">Retire.js</a> - a Passive Scan rule which implements checks provided by <a href="https://retirejs.github.io/retire.js/">Retire.js</a> in order to identify vulnerable or out-dated JavaScript packages</li>
</ul>

<H2>Changes in Bundled Libraries</H2>
The following libraries were updated:
<ul>
  <li>Bouncy Castle, 1.61 → 1.67</li>
  <li>Commons Codec, 1.13 → 1.15</li>
  <li>Commons CSV, 1.7 → 1.8</li>
  <li>Commons IO, 2.6 → 2.8.0</li>
  <li>Commons Lang3, 3.9 → 3.11</li>
  <li>Commons Text, 1.8 → 1.9</li>
  <li>HSQLDB, 2.5.0 → 2.5.1</li>
  <li>JFreeChart, 1.0.13 → 1.5.1</li>
  <li>RSyntaxTextArea, 3.0.4 → 3.1.1</li>
  <li>SQLite JDBC, 3.28.0 → 3.32.3.2</li>
</ul>

<H3>Logging Library</H3>
The logging library, Log4j, was updated to the new major version (2.x). The previous version is still included for compatibility with existing code, add-on and script authors are encouraged to migrate to the new API.
<br>
For example, the logger can now be obtained with:
<pre><code class="language-java">import org.apache.logging.log4j.LogManager;
import org.apache.logging.log4j.Logger;

// ...

Logger logger = LogManager.getLogger(MyClass.class);</pre></code>

<H2>Enhancements</H2>
<ul>
<li><a href="https://github.com/zaproxy/zaproxy/issues/9">Issue 9</a> : No Way to Specify Custom 404</li>
<li><a href="https://github.com/zaproxy/zaproxy/issues/29">Issue 29</a> : SOCKS (outgoing) proxy support</li>
<li><a href="https://github.com/zaproxy/zaproxy/issues/78">Issue 78</a> : Show message type in History tab</li>
<li><a href="https://github.com/zaproxy/zaproxy/issues/111">Issue 111</a> : Provide a button on the resend screen to inject a CSRF token</li>
<li><a href="https://github.com/zaproxy/zaproxy/issues/408">Issue 408</a> : Add support to encoding transformations</li>
<li><a href="https://github.com/zaproxy/zaproxy/issues/560">Issue 560</a> : Content-Length header always updated on Send - cannot Resend some requests</li>
<li><a href="https://github.com/zaproxy/zaproxy/issues/1351">Issue 1351</a> : Decode gzip'ed content in Request tab</li>
<li><a href="https://github.com/zaproxy/zaproxy/issues/1701">Issue 1701</a> : Lack of Encoding Breaks Syntax Highlighting</li>
<li><a href="https://github.com/zaproxy/zaproxy/issues/3452">Issue 3452</a> : Add "Remove from site tree" in search</li>
<li><a href="https://github.com/zaproxy/zaproxy/issues/5542">Issue 5542</a> : Improve dark mode</li>
<li><a href="https://github.com/zaproxy/zaproxy/issues/5732">Issue 5732</a> : HTML Reports should offer a table based on alert names</li>
<li><a href="https://github.com/zaproxy/zaproxy/issues/5738">Issue 5738</a> : Improve version message in Manage Add-ons dialogue</li>
<li><a href="https://github.com/zaproxy/zaproxy/issues/5844">Issue 5844</a> : Add context menu item to mark false positives</li>
<li><a href="https://github.com/zaproxy/zaproxy/issues/5845">Issue 5845</a> : Alert API Additions</li>
<li><a href="https://github.com/zaproxy/zaproxy/issues/5864">Issue 5864</a> : Add buttons to select the file types ignored on Break</li>
<li><a href="https://github.com/zaproxy/zaproxy/issues/5873">Issue 5873</a> : Add FlatLaf L&amp;F, for dark mode</li>
<li><a href="https://github.com/zaproxy/zaproxy/issues/5874">Issue 5874</a> : Revise Site Certificates to Max 398d</li>
<li><a href="https://github.com/zaproxy/zaproxy/issues/5898">Issue 5898</a> : Allow to import from file into regular expression panels (e.g. Include in Context)</li>
<li><a href="https://github.com/zaproxy/zaproxy/issues/5923">Issue 5923</a> : Expose enable related state in scripts API</li>
<li><a href="https://github.com/zaproxy/zaproxy/issues/5934">Issue 5934</a> : Allow language to be specified on commandline</li>
<li><a href="https://github.com/zaproxy/zaproxy/issues/5963">Issue 5963</a> : Add host and path columns to the history table</li>
<li><a href="https://github.com/zaproxy/zaproxy/issues/5973">Issue 5973</a> : added known csrf token for pfsense</li>
<li><a href="https://github.com/zaproxy/zaproxy/issues/6010">Issue 6010</a> : Do not recompile unchanged scripts</li>
<li><a href="https://github.com/zaproxy/zaproxy/issues/6038">Issue 6038</a> : Allow Parsing of Some Non-text Messages by the Spider</li>
<li><a href="https://github.com/zaproxy/zaproxy/issues/6068">Issue 6068</a> : On CSRF variable detection search for partial match instead of full</li>
<li><a href="https://github.com/zaproxy/zaproxy/issues/6075">Issue 6075</a> : Allow to override ApiImplementor i18n key prefix</li>
<li><a href="https://github.com/zaproxy/zaproxy/issues/6079">Issue 6079</a> : Allow to differentiate requests by body content in Sites tree</li>
<li><a href="https://github.com/zaproxy/zaproxy/issues/6084">Issue 6084</a> : Add generation date to the HTML and MD reports</li>
<li><a href="https://github.com/zaproxy/zaproxy/issues/6126">Issue 6126</a> : Add more control over the site tree</li>
<li><a href="https://github.com/zaproxy/zaproxy/issues/6163">Issue 6163</a> : Support authentication polling</li>
<li><a href="https://github.com/zaproxy/zaproxy/issues/6196">Issue 6196</a> : Upgrade the version of log4j</li>
<li><a href="https://github.com/zaproxy/zaproxy/issues/6201">Issue 6201</a> : Support dynamic Look and Feel switching</li>
<li><a href="https://github.com/zaproxy/zaproxy/issues/6226">Issue 6226</a> : Allow to define the maximum body size to passive scan</li>
<li><a href="https://github.com/zaproxy/zaproxy/issues/6277">Issue 6277</a> : Add OneTouchExapandable control to Sites Tree/Request&Response panels</li>
<li><a href="https://github.com/zaproxy/zaproxy/issues/6278">Issue 6278</a> : Add Alert reference field</li>
<li><a href="https://github.com/zaproxy/zaproxy/issues/6295">Issue 6295</a> : Added support for dynamic technologies</li>
<li><a href="https://github.com/zaproxy/zaproxy/issues/6296">Issue 6296</a> : Add auth header define in envvars</li>
<li><a href="https://github.com/zaproxy/zaproxy/issues/6299">Issue 6299</a> : Tweak browser page for browser launch</li>
<li><a href="https://github.com/zaproxy/zaproxy/issues/6313">Issue 6313</a> : Manual Request response send</li>
<li><a href="https://github.com/zaproxy/zaproxy/issues/6333">Issue 6333</a> : Refactor SessionStructure and Session</li>
<li><a href="https://github.com/zaproxy/zaproxy/issues/6353">Issue 6353</a> : Update default and common user agents</li>
<li><a href="https://github.com/zaproxy/zaproxy/issues/6354">Issue 6354</a> : Update email used in certs</li>
</ul>

<H2>Bug Fixes</H2>
<ul>
<li><a href="https://github.com/zaproxy/zaproxy/issues/1584">Issue 1584</a> : GZip de-compression causes loss of newlines</li>
<li><a href="https://github.com/zaproxy/zaproxy/issues/4235">Issue 4235</a> : Warn when unable to save (malformed) HTTP message in Request/Response panels</li>
<li><a href="https://github.com/zaproxy/zaproxy/issues/5701">Issue 5701</a> : Fuzzer runs progressively slower</li>
<li><a href="https://github.com/zaproxy/zaproxy/issues/5899">Issue 5899</a> : Allows Regex duplication in the same Context through the UI</li>
<li><a href="https://github.com/zaproxy/zaproxy/issues/5902">Issue 5902</a> : Active scan script - JSON number values - Weird replaces</li>
<li><a href="https://github.com/zaproxy/zaproxy/issues/5952">Issue 5952</a> : Stats includes Content-Type byteranges limits</li>
<li><a href="https://github.com/zaproxy/zaproxy/issues/5991">Issue 5991</a> : Hook HttpSenderListener when installing add-ons</li>
<li><a href="https://github.com/zaproxy/zaproxy/issues/6008">Issue 6008</a> : Initialization of scripts via ZAP API</li>
<li><a href="https://github.com/zaproxy/zaproxy/issues/6037">Issue 6037</a> : Changing look and feel messes with macOS integrations</li>
<li><a href="https://github.com/zaproxy/zaproxy/issues/6043">Issue 6043</a> : Active scanner tests the same request twice</li>
<li><a href="https://github.com/zaproxy/zaproxy/issues/6102">Issue 6102</a> : Error starting Active Scan in "Everything in Scope" mode.</li>
<li><a href="https://github.com/zaproxy/zaproxy/issues/6121">Issue 6121</a> : html encode in Generate anti-CSRF Test FORM</li>
<li><a href="https://github.com/zaproxy/zaproxy/issues/6138">Issue 6138</a> : Persistent growing high CPU usage with proxy</li>
<li><a href="https://github.com/zaproxy/zaproxy/issues/6206">Issue 6206</a> : Unable to import context without optional fields</li>
<li><a href="https://github.com/zaproxy/zaproxy/issues/6223">Issue 6223</a> : Exception while authenticating with form-based and anti-csrf tokens</li>
<li><a href="https://github.com/zaproxy/zaproxy/issues/6267">Issue 6267</a> : HTML / Markdown Report Generation Fails When Path Contains '#'</li>
<li><a href="https://github.com/zaproxy/zaproxy/issues/6297">Issue 6297</a> : Site tree doesnt correctly represent URLs ending in a /</li>
</ul>

<H2>ZAP API New Endpoints:</H2>

<H3>VIEW ascrf / optionPartialMatchingEnabled</H3>
Define if ZAP should detect CSRF tokens by searching for partial matches

<H3>ACTION ascrf / setOptionPartialMatchingEnabled</H3>
Define if ZAP should detect CSRF tokens by searching for partial matches.

<H3>ACTION alert / updateAlertsConfidence</H3>
Update the confidence of the alerts.

<H3>ACTION alert / updateAlertsRisk</H3>
Update the risk of the alerts.

<H3>ACTION context / setContextCheckingStrategy</H3>
Set the checking strategy for a context - this defines how ZAP checks that a request is authenticated.

<H3>VIEW core / optionUseSocksProxy</H3>
Gets whether or not the SOCKS proxy should be used.

<H3>ACTION core / setOptionUseSocksProxy</H3>
Sets whether or not the SOCKS proxy should be used.

<H3>VIEW users / getAuthenticationState</H3>
Gets the authentication state information for the user identified by the Context and User Ids.

<H3>VIEW users / getAuthenticationSession</H3>
Gets the authentication session information for the user identified by the Context and User Ids, e.g. cookies and realm credentials.

<H3>Action users / authenticateAsUser</H3>
Tries to authenticate as the identified user, returning the authentication request and whether it appears to have succeeded.

<H3>Action users / pollAsUser</H3>
Tries to poll as the identified user, returning the authentication request and whether it appears to have succeeded. This will only work if the polling verification strategy has been configured.

<H3>Action users / setAuthenticationState</H3>
Sets fields in the authentication state for the user identified by the Context and User Ids.

<H3>Action users / setCookie</H3>
Sets the specified cookie for the user identified by the Context and User Ids.

<H2>See Also</H2>
<table>
<tr><td>&nbsp;&nbsp;&nbsp;&nbsp;</td><td><a href="../intro.html">Introduction</a></td><td>the introduction to ZAP</td></tr>
<tr><td>&nbsp;&nbsp;&nbsp;&nbsp;</td><td><a href="releases.html">Releases</a></td><td>the full set of releases</td></tr>
<tr><td>&nbsp;&nbsp;&nbsp;&nbsp;</td><td><a href="../credits.html">Credits</a></td><td>the people and groups who have made this release possible</td></tr>
</table>
</BODY>
</HTML>